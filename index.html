<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    
    <link href="javascripts/slider/js-image-slider.css" rel="stylesheet" type="text/css" />
    <script src="javascripts/slider/js-image-slider.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>CS205-surveillance.GitHub.io by cs205-surveillance</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <div class="col-wrapper">
         <div class="col col-400">        
            <h1>CS205-Surveillance</h1>
            <h2>Training Machines to Keep Watch</h2>
          </div>
          <div class="col col-600">

            <a href="https://github.com/cs205-surveillance/cs205-surveillance" class="button"><small>Code available on</small> GitHub</a>
            <img src="images/camera_icon.png" alt="Camera Icon">
          </div>
        </div>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h3>
<a id="project-overview" class="anchor" href="#project-overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Project Overview</h3>

<iframe width="560" height="315" src="https://www.youtube.com/embed/P-cg2WMaPZ0" frameborder="0" allowfullscreen></iframe>
<p> </p>
<p>As society pushes toward the <a href="https://en.wikipedia.org/wiki/Internet_of_Things">Internet of Things (IoT)</a>, surveillance technology has been greatly commoditized. As camera and information systems technology has improved, there has been an increase in the number of camera systems used to monitor and protect public and private spaces alike. Common venues for surveillance include city streets, secured private spaces such as an industrial complex, and even individual residences. The volume of data that is being recorded from deployed surveillance technology has outgrown the capacity of human operators. With the rise in surveillance technology, there is a greater need for autonomous monitoring of the data feeds coming from these monitoring systems.  [<b>INSERT FACT ABOUT NYC/LONDON/ETC SURVEILLANCE CAMERAS</b>]. This is particularly true of facilities with multiple cameras distributed across various sites being fed into a central monitoring system.</p>
<figure>
    <div id="sliderFrame" style="margin-bottom: 4em; margin-top: 2em">
      <div id="slider">
        <img src="images/oneguy_multimonitor.jpeg" alt="One guy, lots of work" width="500" height="350" />
        <img src="images/oneguy_multimonitor2.jpeg" alt="What did they find?" width="500" height="350" />
      </div>
    </div>
</figure>

<p>This project, completed for the Fall 2015 CS205 course at Harvard University, attempts to provide a foundation to automate anomaly detection in surveilance video, utilizing contemporary methods of parallel computing. The focus of this project, computationally, was to develop a detection algorithm that will run in real-time and provide decision support for an operator tasked with monitoring multiple camera feeds. To acheive this desired benchmark the processing, detection and decision algorithms (catalogued below) were written in Python, leveraging the pycuda module, and run on a designated NVIDIA Jetson TK1.</p>

<h3>
<a id="prior-work" class="anchor" href="#prior-work" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prior Work</h3>

<p>Outline academic background.</p>

<h3>
<a id="hardware-setup" class="anchor" href="#hardware-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hardware Setup</h3>

<p>We gathered simulated surveillance data by orienting a webcam to monitor an infrequently traversed sidewalk behind the Northwest Laboratory Building on the northern end of Harvard's campus.</p>

<img src="images/surv_region.png" />

<p> </p>
<p>To process the images and determine any anomalous behavior, algorithms were implemented in Python's pycuda module and run on a specially designated NVIDIA Jetson TK1 GPU. This particular GPU was allocated with the intent of optimally parallelizing our algorithms with the goal of acheiving real-time processing, detection and identification. For our purposes real-time is analogous to process time less than or equal to a normal collection frame rate of 20 frames per second (fps).</p>

<table style="width:100%" border="0">
  <col width="175">
  <col width="300">
  <tr>
    <td><img src="images/NWL_cameraLoc.png" alt="Monitoring location" height="300" width="225" align="center"/></td>
    <td><p align="left">We collected a batch of 300 frames, pausing for 200 milliseconds between frames (5 fps), at times when it was likely that individuals may be crossing through our monitoring area of interest. </p> 
      <p align="left"> With our image stack, we run each frame through the following process (to be described in greater detail below): 1) Compare, pixel-by-pixel, the intensity of the current frame against a running average of all previous frames. Identifying those outlying pixels that are significantly different from the mean intensity. 2) Perform a minimum filter to remove speckle noise. 3) Aggregate outlying pixels to form superpixels. If a majority of pixels in a superpixel are outliers, the entire superpixel is then marked anomalous. 4) Create overlay on original frame to designate anomalous region and alert surveillance operator. </p>

    </td> 
  </tr>       
</table>




<h3>
<a id="code-work-flow" class="anchor" href="#code-work-flow" aria-hidden="true"><span class="octicon octicon-link"></span></a>Code Work Flow</h3>

<p>To detect, locate and determine anomalies in the surveillance feed frames are passed through the processes outlined below.</p>

<p> [INSERT ALGORITHM SCHEMATIC] </p>

<ol>
  <li>Perform a running gaussian average discriminant on frame</li>
  <li>Pass frame through 3x3 minimum filter</li>
  <li>Aggregate into superpixels and flag all anomalous behavior </li>
</ol> 


<p> We will walk through our algorithm with this representative frame, which includes an outsider inside our monitoring region</p>
<img src="images/raw_img.jpeg" />


<h4>1. Running Gaussian Average </h4>
<p> </p>

<p>Passing an image through a <a href="https://en.wikipedia.org/wiki/Background_subtraction#Running_Gaussian_average">running gaussian average</a> is a conventional approach used to designate foreground pixels from those considered to be in the background. The background is calculated by updating the mean and variance of each pixel from subsequent frames, when that particular pixel doesn't differ from the prior mean (scaled by the variance) more than a specified threshold value.</p>

<p>The output of a running gaussian average can either be a binary mask of foreground/background pixels or a continuous representation of each pixels deviation from the pixel mean, scaled by the variance of that pixel. In order to provide more dynamic thresholding later in the algorithm, we chose to return the latter.</p>

<p>At the moment in time our visitor appears, the calculated background appears like this </p>
<img src="images/mu_img.jpeg" />
<p> </p>
<p>The running gaussian average serves to highlight all significant differences in our current from from that calculated background. What you can see in the image below is that the person and his shadow stand out, as does some rustling leaves in the trees due to some wind.</p>
<img src="images/rga_img.jpeg" />

<h4>2. 3x3 Minimum Filter</h4>
<p> </p>
<p>While the running gaussian average is generally robust to small variations in movement and light variations, the output of the running gaussian average is generally rife with speckle noise. To smooth out this noise, we applied a 3x3 <a href="http://www.roborealm.com/help/Min.php"> minimum filter </a>. That is, every pixel will take on the minimum value of the pixels that surround it. After passing through this filter, the frame is nearly absent of any noise caused by small variations in the background while prominently featuring our target.</p>
<img src="images/filt_img.jpeg" />

<h4>3. Aggregate into Superpixels and flag detected anomalies</h4>
<p> </p>
<p>In order to characterize whether the remaining pixels form an anomaly, the frame is segmented into <a href="https://www.google.com/webhp?sourceid=chrome-instant&ion=1&espv=2&es_th=1&ie=UTF-8#q=superpixel+segmentation">superpixels</a>, a collection of neighboring pixels. Superpixels can provide generic information about a larger region of pixels and are thereby used to infer general attributes about that region. We determine that a superpixel is an anomaly if a large portion of its members represent a foreground variation in our scene. This and all other detected anomalies are then flagged and used to highlight the surveillance operator.</p>
<img src="images/final_img.jpeg" />

<h3>
<a id="performance" class="anchor" href="#performance" aria-hidden="true"><span class="octicon octicon-link"></span></a>Performance</h3>

<p>Discuss performance gains from serial implementation to parallel...</p>

<h3>
<a id="summary-and-conclusions" class="anchor" href="#summary-and-conclusions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Summary and Conclusions</h3>

<p>Outline the cool stuff we learned and how we overcame any challenges that arose.</p>
        </section>

        <aside id="sidebar">


          <p>The content of this project was developed as a final project for Fall'15 Harvard CS205, completed by <a href="https://github.com/apetschek">Andrew Petschek</a>, <a href="https://github.com/1reinier"> Reinier Maat</a> and <a href="https://github.com/twkillian"> Taylor Killian</a>.</p>
          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-70866220-2");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
